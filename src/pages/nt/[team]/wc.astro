---
import BaseLayout from "../../../layouts/BaseLayout.astro";
import { parseCsv } from "../../../lib/csvSimple";

import fs from "node:fs";
import path from "node:path";

import { loadCallups } from "../../../lib/callups";
import { loadClubMaster } from "../../../lib/clubMaster";

import {
  getTeamCareerGA,
  getTeamEditionSubtotals,
  getTeamEventsByEdition,
} from "../../../lib/matchEvents";

import { STRONG_TEAMS } from "../../../lib/strongTeams";

type NtMasterRow = {
  team_slug: string;
  country_name_ja: string;
  is_enabled?: string;
};

type NtTournamentMetaRow = {
  competition: string;
  edition: string;
  team_slug: string;
  coach_ja?: string;
  result_ja?: string;
  host_ja?: string;
  comment_ja?: string;
};

// ====================
// getStaticPathsï¼šã“ã“ã ã‘ã€Œå®Œå…¨ç›´æ›¸ãã€ã§å®‰å®šåŒ–
// ====================
export async function getStaticPaths() {
  const p = path.join(process.cwd(), "src", "data", "nt_master.csv");
  const text = fs.readFileSync(p, "utf-8");
  const rows = parseCsv(text);

  const enabled = rows.filter((r: any) => {
    const v = String(r.is_enabled ?? "")
      .trim()
      .toLowerCase();
    return v === "1" || v === "true" || v === "yes";
  });

  return enabled
    .map((r: any) => String(r.team_slug ?? "").trim())
    .filter(Boolean)
    .map((team) => ({ params: { team } }));
}

// ====================
// ä»¥é™ï¼šãƒšãƒ¼ã‚¸å´ï¼ˆã“ã“ã¯é–¢æ•°ä½¿ã£ã¦OKï¼‰
// ====================
function readCsv(fileName: string) {
  const p = path.join(process.cwd(), "src", "data", fileName);
  const text = fs.readFileSync(p, "utf-8");
  return parseCsv(text);
}

const { team } = Astro.params;
const teamSlug = String(team ?? "").trim();

// nt_master
const ntMaster: NtMasterRow[] = readCsv("nt_master.csv").map((r: any) => ({
  team_slug: String(r.team_slug ?? "").trim(),
  country_name_ja: String(r.country_name_ja ?? "").trim(),
  is_enabled: String(r.is_enabled ?? "").trim(),
}));

const bySlug = new Map(ntMaster.map((r) => [r.team_slug, r]));
const isEnabled = (v?: string) => {
  const s = String(v ?? "")
    .trim()
    .toLowerCase();
  return s === "1" || s === "true" || s === "yes";
};

const me = ntMaster.find((r) => r.team_slug === teamSlug);
if (!me)
  throw new Error(`nt_master.csv ã« team_slug=${teamSlug} ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“`);

const countryJa = me.country_name_ja;
const competition = "WC";
const teamName = countryJa; // match_events ã® team ã¯è¡¨ç¤ºåã§æƒãˆã‚‹å‰æ
const gaCareer = getTeamCareerGA(competition, teamName);
const gaByEdition = getTeamEditionSubtotals(competition, teamName);
const showGA = gaCareer.length > 0;

// nt_tournament_meta
const metaAll: NtTournamentMetaRow[] = readCsv("nt_tournament_meta.csv").map(
  (r: any) => ({
    competition: String(r.competition ?? "").trim(),
    edition: String(r.edition ?? "").trim(),
    team_slug: String(r.team_slug ?? "").trim(),
    coach_ja: String(r.coach_ja ?? "").trim(),
    result_ja: String(r.result_ja ?? "").trim(),
    host_ja: String(r.host_ja ?? "").trim(),
    comment_ja: String(r.comment_ja ?? "").trim(),
  }),
);

const metaWC = metaAll
  .filter((m) => m.team_slug === teamSlug)
  .filter((m) => String(m.competition).toUpperCase() === "WC");

// callups ã‹ã‚‰å¤§ä¼šå¹´
const callups = loadCallups()
  .filter((r: any) => String(r.competition ?? "").toUpperCase() === "WC")
  .filter((r: any) => String(r.country ?? "").trim() === countryJa);

const editionsFromCallups = Array.from(
  new Set(
    callups.map((r: any) => String(r.edition ?? "").trim()).filter(Boolean),
  ),
);

const editions = Array.from(
  new Set([
    ...editionsFromCallups,
    ...metaWC.map((m) => String(m.edition ?? "").trim()).filter(Boolean),
  ]),
).sort((a, b) => Number(b) - Number(a));

const metaByEdition = new Map<string, NtTournamentMetaRow>();
for (const m of metaWC) {
  const ed = String(m.edition ?? "").trim();
  if (!ed) continue;
  metaByEdition.set(ed, m);
}

// 1è¡¨ç”¨ï¼šå…¨å¤§ä¼šã¾ã¨ã‚
const eventsAll = editions.flatMap((ed) =>
  getTeamEventsByEdition("WC", teamName, String(ed)).map((e) => ({
    ...e,
    edition: String(ed),
  })),
);

const toNum = (v: any) => {
  const n = Number(String(v ?? "").replace(/[^\d]/g, ""));
  return Number.isFinite(n) ? n : 0;
};

eventsAll.sort((a: any, b: any) => {
  const ed = toNum(a.edition) - toNum(b.edition);
  if (ed !== 0) return ed;
  const ra = String(a.round ?? "");
  const rb = String(b.round ?? "");
  if (ra !== rb) return ra.localeCompare(rb, "ja");
  return toNum(a.minute) - toNum(b.minute);
});

// è¡¨ã®è¡¨ç¤ºæ¡ä»¶ï¼ˆ1ä»¶ã§ã‚‚ã‚ã‚Œã°è¡¨ç¤ºï¼‰
const showGAList = eventsAll.length > 0;

// â‘¤ æµ·å¤–/å›½å†…ï¼ˆæš«å®šï¼šclub_masterã«ãƒ’ãƒƒãƒˆã™ã‚Œã°æµ·å¤–æ‰±ã„ï¼‰
const clubMaster = loadClubMaster();
const normalize = (s: string) =>
  String(s || "")
    .trim()
    .replace(/\s+/g, " ")
    .replace(/ã€€/g, " ")
    .toLowerCase();

const parseAliases = (aliases: string) =>
  String(aliases || "")
    .split(/[|,ã€/]/)
    .map((s) => s.trim())
    .filter(Boolean);

function resolveClub(clubName: string) {
  const raw = String(clubName || "").trim();
  if (!raw) return null;
  const key = normalize(raw);

  const c = clubMaster.find((x: any) => {
    const ja = normalize(x.club_display_ja || "");
    const en = normalize(x.club_display_en || "");
    if (key === ja || key === en) return true;
    const als = parseAliases(x.aliases);
    return als.some((a) => normalize(a) === key);
  });

  return c ?? null;
}

function buildOverseasSummary(edition: string) {
  const rows = callups.filter(
    (r: any) => String(r.edition ?? "").trim() === edition,
  );
  let domestic = 0;
  let total = 0;

  const seen = new Set<string>();

  for (const r of rows) {
    const key = String(r.name_en ?? "").trim();
    if (!key || seen.has(key)) continue;
    seen.add(key);

    const club = String(r.current_club ?? "").trim();
    if (!club) continue;

    const hit: any = resolveClub(club);

    // å›½å†…ã‚¯ãƒ©ãƒ–ã®ã¿ã‚«ã‚¦ãƒ³ãƒˆ
    if (hit && String(hit.league_key ?? "") === "J") {
      domestic++;
    }

    total++;
  }
  const overseas = total - domestic;

  return { overseas, domestic, total };
}

const heading = `${countryJa}ä»£è¡¨ ãƒ¯ãƒ¼ãƒ«ãƒ‰ã‚«ãƒƒãƒ—ã®æ­©ã¿`;
const title = `${countryJa}ä»£è¡¨ ãƒ¯ãƒ¼ãƒ«ãƒ‰ã‚«ãƒƒãƒ—ã®æ­©ã¿ | World Football Archive`;
const description = `${countryJa}ä»£è¡¨ã®ãƒ¯ãƒ¼ãƒ«ãƒ‰ã‚«ãƒƒãƒ—å‡ºå ´å¤§ä¼šã‚’ä¸€è¦§ã§ã€‚å„å¤§ä¼šã®ç›£ç£ãƒ»æˆç¸¾ãƒ»ãƒ¡ãƒ³ãƒãƒ¼ã‚’ã‚µã‚¯ãƒƒã¨åˆ‡ã‚Šæ›¿ãˆã¦é–²è¦§ã§ãã¾ã™ã€‚`;
---

<BaseLayout
  title={title}
  description={description}
  bodyClass="page-nt-hub"
  bodyStyle="margin:0; font-family: system-ui;"
  showPageHeader={true}
  crumbs={[
    { label: "ãƒˆãƒƒãƒ—", href: "/" },
    { label: `${countryJa}ä»£è¡¨`, href: "/#jp" },
    { label: "ãƒ¯ãƒ¼ãƒ«ãƒ‰ã‚«ãƒƒãƒ—ã®æ­©ã¿" },
  ]}
  heading={heading}
>
  <div class="strong-pills">
    {
      STRONG_TEAMS.map((slug) => {
        const m = bySlug.get(slug);
        const label = m?.country_name_ja || slug;
        const ok = isEnabled(m?.is_enabled);
        const href = `/nt/${encodeURIComponent(slug)}/wc`;

        return ok ? (
          <a class="pill" href={href}>
            {label}
          </a>
        ) : (
          <span class="pill is-disabled" aria-disabled="true">
            {label}
          </span>
        );
      })
    }
  </div>
</BaseLayout>

<div class="section-wrap">
  <div class="lead">
    <p>
      {
        countryJa
      }ä»£è¡¨ã®ãƒ¯ãƒ¼ãƒ«ãƒ‰ã‚«ãƒƒãƒ—å‡ºå ´å¤§ä¼šã‚’ä¸€è¦§ã§ã¾ã¨ã‚ã¾ã—ãŸã€‚å„å¤§ä¼šã®ã‚«ãƒ¼ãƒ‰ã‹ã‚‰ã€æ­´ä»£ãƒ¡ãƒ³ãƒãƒ¼ä¸€è¦§ã¸ã™ãç§»å‹•ã§ãã¾ã™ã€‚
    </p>
  </div>

  <section class="cards" aria-label="å¤§ä¼šä¸€è¦§">
    {
      editions.map((ed) => {
        const m = metaByEdition.get(ed);
        const coach = String(m?.coach_ja ?? "").trim();
        const result = String(m?.result_ja ?? "").trim();
        const host = String(m?.host_ja ?? "").trim();
        const comment = String(m?.comment_ja ?? "").trim();

        const summary = buildOverseasSummary(ed);
        const hasRoster = summary.total > 0;

        const href = `/wc/${ed}/team/${encodeURIComponent(countryJa)}`;

        return (
          <a class={`card ${!hasRoster ? "is-empty" : ""}`} href={href}>
            <div class="card-top">
              <div class="ed">
                <span class="ed-year">{ed}</span>
                <span class="ed-badge">WC</span>
              </div>
              {host && <div class="host">{host}</div>}
            </div>

            <div class="meta">
              <div class="row">
                <span class="k">ç›£ç£</span>
                <span class="v">{coach || "â€”"}</span>
              </div>
              <div class="row">
                <span class="k">æˆç¸¾</span>
                <span class="v">{result || "â€”"}</span>
              </div>
            </div>

            <div class="stats">
              <div class="chip">
                <span class="k">ãƒ¡ãƒ³ãƒãƒ¼</span>
                <span class="v">
                  {hasRoster ? `${summary.total}äºº` : "æº–å‚™ä¸­"}
                </span>
              </div>

              {hasRoster && teamSlug === "japan" && (
                <div class="chip">
                  <span class="k">æµ·å¤–/å›½å†…</span>
                  <span class="v">
                    {summary.overseas}/{summary.domestic}
                  </span>
                </div>
              )}
            </div>

            {comment && <div class="comment">ğŸ’¬ {comment}</div>}
            <div class="go">ãƒ¡ãƒ³ãƒãƒ¼ã‚’è¦‹ã‚‹ â†’</div>
          </a>
        );
      })
    }
  </section>

  <section class="stats-wrap">
    {
      showGAList && (
        <>
          <h2 class="sec-title">å¤§ä¼šåˆ¥å¾—ç‚¹ãƒ»ã‚¢ã‚·ã‚¹ãƒˆ</h2>
          <div class="block">
            <div class="table-wrap">
              <table class="tbl events-tbl">
                <thead>
                  <tr>
                    <th class="num">å¤§ä¼š</th>
                    <th>å¾—ç‚¹è€…</th>
                    <th class="round">ãƒ•ã‚§ãƒ¼ã‚º</th>
                    <th>vs</th>
                    <th class="num">åˆ†</th>
                    <th>ã‚¢ã‚·ã‚¹ãƒˆ</th>
                    <th>å‚™è€ƒ</th>
                  </tr>
                </thead>
                <tbody>
                  {eventsAll.map((e) => (
                    <tr>
                      <td class="num">{e.edition}</td>
                      <td>{e.player || "â€”"}</td>
                      <td class="round">
                        {String(e.round ?? "").trim() || "â€”"}
                      </td>
                      <td>{e.vs || "â€”"}</td>
                      <td class="num">{e.minute ?? "â€”"}</td>
                      <td>{e.assist || "â€”"}</td>
                      <td>{e.note || ""}</td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        </>
      )
    }

    {
      showGA && (
        <>
          <h2 class="sec-title">å¾—ç‚¹ãƒ»ã‚¢ã‚·ã‚¹ãƒˆï¼ˆWæ¯é€šç®—ï¼‰</h2>

          <div class="block">
            <div class="ga-grid">
              <div class="ga-box">
                <h3 class="ga-h">å¤§ä¼šåˆ¥ï¼ˆä¸­è¨ˆï¼‰</h3>
                <div class="table-wrap ga-wrap">
                  <table class="tbl ga-tbl ga-edition">
                    <thead>
                      <tr>
                        <th>å¤§ä¼š</th>
                        <th class="num">å¾—ç‚¹</th>
                        <th class="num">ã‚¢ã‚·ã‚¹ãƒˆ</th>
                        <th class="num">G+A</th>
                      </tr>
                    </thead>
                    <tbody>
                      {gaByEdition.map((r) => (
                        <tr>
                          <td>{r.edition}</td>
                          <td class="num">{r.goals}</td>
                          <td class="num">{r.assists}</td>
                          <td class="num">{r.ga}</td>
                        </tr>
                      ))}
                      <tr class="total">
                        <td>é€šç®—</td>
                        <td class="num">
                          {gaByEdition.reduce((s, r) => s + r.goals, 0)}
                        </td>
                        <td class="num">
                          {gaByEdition.reduce((s, r) => s + r.assists, 0)}
                        </td>
                        <td class="num">
                          {gaByEdition.reduce((s, r) => s + r.ga, 0)}
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <div class="ga-box">
                <h3 class="ga-h">é¸æ‰‹åˆ¥ï¼ˆé€šç®—ï¼‰</h3>
                <div class="table-wrap ga-wrap">
                  <table class="tbl ga-tbl ga-player">
                    <thead>
                      <tr>
                        <th class="num">#</th>
                        <th>é¸æ‰‹</th>
                        <th class="num">å¾—ç‚¹</th>
                        <th class="num">ã‚¢ã‚·ã‚¹ãƒˆ</th>
                        <th class="num">G+A</th>
                      </tr>
                    </thead>
                    <tbody>
                      {gaCareer.map((r, i) => (
                        <tr>
                          <td class="num">{i + 1}</td>
                          <td>{r.player}</td>
                          <td class="num">{r.goals}</td>
                          <td class="num">{r.assists}</td>
                          <td class="num">{r.ga}</td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>

            <p class="muted ga-note">â€»ä»–å¼·è±ªå›½Verã‚‚ãƒ‡ãƒ¼ã‚¿æº–å‚™ä¸­</p>
          </div>
        </>
      )
    }
  </section>

  <style is:global>
    /* =========================
    Layout (page-nt-hub)
  ========================= */
    .page-nt-hub .section-wrap {
      max-width: 1100px;
      margin: 0 auto;
    }

    .page-nt-hub .lead {
      margin: 6px 0 14px;
      color: #374151;
      font-size: 14px;
      line-height: 1.7;
    }

    /* =========================
    Strong pills
  ========================= */
    .page-nt-hub .strong-pills {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 14px;
    }

    .page-nt-hub .pill {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(0, 0, 0, 0.08);
      background: #fff;
      font-size: 13px;
      text-decoration: none;
      color: #111;
    }
    .page-nt-hub .pill:hover {
      border-color: color-mix(
        in srgb,
        var(--color-wc) 35%,
        rgba(0, 0, 0, 0.08)
      );
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.06);
    }
    .page-nt-hub .pill.is-disabled {
      opacity: 0.45;
      cursor: not-allowed;
      pointer-events: none;
    }

    /* =========================
    Cards
  ========================= */
    .page-nt-hub .cards {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
      margin-bottom: 24px;
      border-top: 4px solid var(--color-wc);
      padding-top: 12px;
    }
    @media (max-width: 1100px) {
      .page-nt-hub .cards {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    @media (max-width: 820px) {
      .page-nt-hub .cards {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    @media (max-width: 560px) {
      .page-nt-hub .cards {
        grid-template-columns: 1fr;
      }
    }

    .page-nt-hub .card {
      display: block;
      text-decoration: none;
      color: inherit;
      border: 1px solid rgba(0, 0, 0, 0.08);
      background: #fff;
      border-radius: 14px;
      padding: 12px 12px 10px;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.06);
      transition:
        transform 0.08s ease,
        box-shadow 0.08s ease;
    }
    .page-nt-hub .card:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 22px rgba(0, 0, 0, 0.08);
    }
    .page-nt-hub .card.is-empty {
      opacity: 0.65;
    }

    .page-nt-hub .card-top {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 10px;
    }
    .page-nt-hub .ed {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .page-nt-hub .ed-year {
      font-size: 18px;
      font-weight: 750;
      letter-spacing: 0.2px;
    }
    .page-nt-hub .ed-badge {
      font-size: 12px;
      font-weight: 700;
      padding: 2px 8px;
      border-radius: 999px;
      background: color-mix(in srgb, var(--color-wc) 18%, transparent);
      color: var(--color-wc);
      border: 1px solid color-mix(in srgb, var(--color-wc) 25%, transparent);
    }
    .page-nt-hub .host {
      font-size: 12px;
      opacity: 0.75;
      white-space: nowrap;
    }

    .page-nt-hub .meta {
      display: grid;
      gap: 6px;
      margin-bottom: 10px;
    }
    .page-nt-hub .row {
      display: flex;
      gap: 10px;
      align-items: baseline;
    }
    .page-nt-hub .row .k {
      font-size: 12px;
      opacity: 0.7;
      min-width: 34px;
    }
    .page-nt-hub .row .v {
      font-size: 13px;
      font-weight: 600;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .page-nt-hub .stats {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 8px 0 10px;
    }
    .page-nt-hub .chip {
      display: inline-flex;
      gap: 6px;
      align-items: baseline;
      border: 1px solid rgba(0, 0, 0, 0.08);
      border-radius: 999px;
      padding: 4px 10px;
      background: #fafafa;
      font-size: 12px;
    }
    .page-nt-hub .chip .k {
      opacity: 0.7;
    }
    .page-nt-hub .chip .v {
      font-weight: 700;
    }

    .page-nt-hub .comment {
      font-size: 12px;
      opacity: 0.8;
      line-height: 1.5;
      margin: 6px 0 8px;
    }
    .page-nt-hub .go {
      margin-top: 6px;
      font-size: 12.5px;
      font-weight: 700;
      color: var(--color-wc);
    }

    /* =========================
    Stats / Tables common
  ========================= */
    .page-nt-hub .stats-wrap {
      max-width: 1100px;
      margin: 24px auto;
    }

    .page-nt-hub .sec-title {
      margin: 18px 0 10px;
      font-size: 16px;
      font-weight: 850;
    }

    .page-nt-hub .block {
      background: #fff;
      border: 1px solid rgba(0, 0, 0, 0.08);
      border-radius: 14px;
      padding: 12px;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.05);
      margin-bottom: 18px;
    }

    .page-nt-hub .table-wrap {
      overflow: auto;
      border: 1px solid rgba(0, 0, 0, 0.08);
      border-radius: 12px;
      background: #fff;
    }

    .page-nt-hub .tbl {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      min-width: 720px;
    }

    .page-nt-hub .tbl thead th {
      position: sticky;
      top: 0;
      background: color-mix(in srgb, var(--color-wc) 14%, white); /* â†WCè‰² */
      border-bottom: 1px solid rgba(0, 0, 0, 0.08);
      font-size: 12px;
      font-weight: 800;
      text-align: left;
      padding: 10px 10px;
      white-space: nowrap;
      z-index: 3; /* ãƒ˜ãƒƒãƒ€ãƒ¼å„ªå…ˆ */
    }

    .page-nt-hub .tbl tbody td {
      border-bottom: 1px solid rgba(0, 0, 0, 0.06);
      padding: 10px 10px;
      font-size: 13px;
      white-space: nowrap;
      vertical-align: middle;
    }

    .page-nt-hub .tbl tbody tr:hover td {
      background: rgba(0, 0, 0, 0.02);
    }

    .page-nt-hub .tbl .num,
    .page-nt-hub .tbl .round {
      text-align: center;
      font-variant-numeric: tabular-nums;
      width: 72px;
    }

    /* =========================
    events table: left sticky (å¤§ä¼šåˆ¥å¾—ç‚¹ãƒ»ã‚¢ã‚·ã‚¹ãƒˆ)
    â€» table class="tbl events-tbl" ãŒå‰æ
  ========================= */
    .page-nt-hub .events-tbl th:first-child,
    .page-nt-hub .events-tbl td:first-child {
      position: sticky;
      left: 0;
      z-index: 2;
      background: #fff; /* â†è¡ŒèƒŒæ™¯ã¯ã“ã“ã§ã¯å›ºå®šã§OK */
      border-right: 1px solid rgba(0, 0, 0, 0.08);
    }
    .page-nt-hub .events-tbl thead th:first-child {
      z-index: 4; /* å·¦ä¸Šã‚»ãƒ«æœ€å¼· */
      background: color-mix(in srgb, var(--color-wc) 14%, white);
    }
    .page-nt-hub .events-tbl tbody tr:hover td:first-child {
      background: rgba(0, 0, 0, 0.02); /* hoverã«è¿½å¾“ */
    }

    /* =========================
    GA grid (ä¸‹2è¡¨)
  ========================= */
    .page-nt-hub .ga-grid {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      gap: 14px;
      align-items: start;
    }
    @media (max-width: 720px) {
      .page-nt-hub .ga-grid {
        grid-template-columns: 1fr;
      }
    }

    .page-nt-hub .ga-box {
      border: 1px solid rgba(0, 0, 0, 0.08);
      border-radius: 12px;
      padding: 10px;
      background: #fafafa;
      min-width: 0;
    }
    .page-nt-hub .ga-h {
      margin: 0 0 8px;
      font-size: 13px;
      font-weight: 800;
    }
    .page-nt-hub .ga-note {
      margin: 10px 2px 0;
      font-size: 12px;
      opacity: 0.75;
    }

    .page-nt-hub .ga-wrap {
      overflow: auto;
    } /* â†ã“ã“ã¯ â€œautoâ€ ã«çµ±ä¸€ */
    .page-nt-hub .ga-tbl {
      min-width: 520px; /* â†ã‚¹ãƒãƒ›ã§ã‚‚æœ€ä½èª­ã‚ã‚‹ */
      table-layout: fixed;
    }

    /* GA: 1åˆ—ç›®å›ºå®šï¼ˆã“ã“ã ã‘ã§å®Œçµã•ã›ã‚‹ï¼‰ */
    .page-nt-hub .ga-tbl th:first-child,
    .page-nt-hub .ga-tbl td:first-child {
      position: sticky;
      left: 0;
      z-index: 2;
      background: #fff;
      border-right: 1px solid rgba(0, 0, 0, 0.08);
    }
    .page-nt-hub .ga-tbl thead th:first-child {
      z-index: 4;
      background: color-mix(in srgb, var(--color-wc) 14%, white);
    }
    .page-nt-hub .ga-tbl tbody tr:hover td:first-child {
      background: rgba(0, 0, 0, 0.02);
    }

    /* GA: çœç•¥è¡¨ç¤ºï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå›ºå®šå‰æï¼‰ */
    .page-nt-hub .ga-tbl th,
    .page-nt-hub .ga-tbl td {
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* GA: åˆ—å¹…ï¼ˆã‚ãªãŸã®è¨­è¨ˆã‚’ç¶­æŒï¼‰ */
    .page-nt-hub .ga-edition th:first-child,
    .page-nt-hub .ga-edition td:first-child {
      width: 76px;
      white-space: nowrap;
    }
    .page-nt-hub .ga-player th:nth-child(2),
    .page-nt-hub .ga-player td:nth-child(2) {
      width: 55%;
    }
  </style>
</div>

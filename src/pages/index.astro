---
// src/pages/index.astro
import BaseLayout from "../layouts/BaseLayout.astro";

import { loadCallups } from "../lib/callups";
import { loadClubSquads } from "../lib/clubSquads";
import { loadLeagueMaster } from "../lib/leagueMaster";
import { loadClubMaster } from "../lib/clubMaster";
import { loadUpdates, latestUpdateDate, fmtJP } from "../lib/updates";
import {
  clubsListUrl,
  tournamentTopUrl,
  DEFAULTS,
  competitionSeasonUrl,
} from "../lib/urls";
import { getUclSeasons, loadUclLeaguePhaseBySeason } from "../lib/ucl";
import { loadTransfers } from "../lib/transfers";

// yyyy-mm-dd ã®æœ€å¤§å€¤ã‚’è¿”ã™ï¼ˆç©ºãªã‚‰ nullï¼‰
const maxYmd = (rows: any[], key: string) => {
  let max: string | null = null;
  for (const r of rows) {
    const v = r?.[key];
    if (!v) continue;
    const s = String(v);
    if (!max || s > max) max = s;
  }
  return max;
};

// è¡¨ç¤ºç”¨ï¼ˆyyyy/mm/ddï¼‰
const ymdToJa = (ymd: any) => (ymd ? String(ymd).replaceAll("-", "/") : "â€”");

// ä»¶æ•°ã‚µãƒãƒªï¼ˆä»£è¡¨ï¼‰
const callupsAll = loadCallups();
const callups = callupsAll.filter(
  (r: any) => r.competition === "WC" && String(r.edition) === "2026",
);
const countries = new Set(callups.map((r: any) => r.country));

// âœ… æ›´æ–°æ—¥ï¼ˆsnapshot_date æœ€å¤§å€¤ï¼‰
const callupsSnapMax = maxYmd(callups, "snapshot_date");
const updatedAtCallups = ymdToJa(callupsSnapMax);

// æ›´æ–°æƒ…å ±
const updates = loadUpdates(4);
const updatedNt = fmtJP(latestUpdateDate("nt"));
const updatedClubs = fmtJP(latestUpdateDate("clubs"));

// ä¸»è¦ãƒªãƒ¼ã‚°ï¼ˆ/clubs å´ã® league_key ã«åˆã‚ã›ã‚‹ï¼‰
const leagueShortcuts = [
  { label: "ãƒ—ãƒ¬ãƒŸã‚¢ãƒªãƒ¼ã‚°", league: "premier-league" },
  { label: "ãƒ©ãƒ»ãƒªãƒ¼ã‚¬", league: "laliga" },
  { label: "ãƒ–ãƒ³ãƒ‡ã‚¹ãƒªãƒ¼ã‚¬", league: "bundesliga" },
  { label: "ã‚»ãƒªã‚¨A", league: "serie-a" },
  { label: "ãƒªãƒ¼ã‚°ãƒ»ã‚¢ãƒ³", league: "ligue-1" },
  { label: "ã‚¨ãƒ¼ãƒ«ãƒ‡ã‚£ãƒ´ã‚£ã‚¸", league: "eredivisie" },
];

// âœ… is_publicã®å‹ãƒ–ãƒ¬ï¼ˆboolean / "TRUE" / "true" / "1"ï¼‰ã‚’å¸å
const isTrue = (v: any) => {
  if (typeof v === "boolean") return v;
  const s = String(v ?? "")
    .trim()
    .toLowerCase();
  return s === "true" || s === "1" || s === "yes" || s === "y" || s === "t";
};

// -------------
// league_key æ­£è¦åŒ–ï¼ˆ/clubs ã¨åŒã˜æ€æƒ³ï¼‰
// -------------
const leagueMasterRows = loadLeagueMaster(); // å…¨ä»¶ï¼ˆaliasè¾æ›¸ç”¨ï¼‰

const leagueAliasToKey = new Map<string, string>();
for (const l of leagueMasterRows as any[]) {
  const key = String(l.league_key ?? "").trim();
  if (!key) continue;

  const aliases = [
    l.league_key,
    l.league,
    l.league_display_ja,
    l.league_display_en,
  ];

  for (const a of aliases) {
    const s = String(a ?? "").trim();
    if (!s) continue;
    leagueAliasToKey.set(s, key);
    leagueAliasToKey.set(s.toLowerCase(), key);
  }
}

function normalizeLeagueKey(v: any): string {
  const s = String(v ?? "").trim();
  if (!s) return "";
  return leagueAliasToKey.get(s) ?? leagueAliasToKey.get(s.toLowerCase()) ?? s;
}

// å…¬é–‹ãƒªãƒ¼ã‚°ï¼ˆæ­£è¦åŒ–å¾Œã‚­ãƒ¼ï¼‰
const publicLeagueKeys = new Set(
  (leagueMasterRows as any[])
    .filter((l) => isTrue(l.is_public))
    .map((l) => normalizeLeagueKey(l.league_key)),
);

// âœ… å…¬é–‹ã‚¯ãƒ©ãƒ–ï¼ˆ/clubs ã¨åŒã˜ï¼šinactive / is_public=false ã‚’é™¤å¤–ï¼‰
const clubMasterRows = loadClubMaster();
const publicClubKeys = new Set(
  (clubMasterRows as any[])
    .filter((c) => {
      if ((c.status ?? "active") === "inactive") return false;
      if (!isTrue(c.is_public ?? true)) return false;
      return true;
    })
    .map((c) => String(c.club_key ?? "").trim())
    .filter(Boolean),
);

// ä»¶æ•°ã‚µãƒãƒªï¼ˆã‚¯ãƒ©ãƒ–ï¼‰
const clubRowsAll = loadClubSquads();

// å…¬é–‹ãƒªãƒ¼ã‚° Ã— å…¬é–‹ã‚¯ãƒ©ãƒ–ã®è¡Œã ã‘
const clubRowsPublic = clubRowsAll.filter((r: any) => {
  const lk = normalizeLeagueKey(r.league_key ?? r.league);
  const ck = String(r.club_key ?? "").trim();
  if (!lk || !ck) return false;
  if (!publicLeagueKeys.has(lk)) return false;
  if (!publicClubKeys.has(ck)) return false;
  return true;
});

function seasonStartYear(season: any): number {
  const s = String(season ?? "").trim();
  if (!s) return 0;
  const m = s.match(/(\d{4})/);
  if (!m) return 0;
  const y = Number(m[1]);
  return Number.isFinite(y) ? y : 0;
}

function windowRank(w: any): number {
  const s = String(w ?? "")
    .trim()
    .toLowerCase();
  if (s === "winter") return 2;
  return 1; // summer or empty
}

type LatestMeta = {
  season: string;
  window: string;
  snapshot_date: string;
};

function isNewerMeta(a: LatestMeta, b: LatestMeta): boolean {
  const ay = seasonStartYear(a.season);
  const by = seasonStartYear(b.season);
  if (ay !== by) return ay > by;

  const aw = windowRank(a.window);
  const bw = windowRank(b.window);
  if (aw !== bw) return aw > bw;

  return String(a.snapshot_date ?? "") > String(b.snapshot_date ?? "");
}

const clubKeyOf = (r: any) =>
  `${normalizeLeagueKey(r.league_key ?? r.league)}__${String(r.club_key ?? "").trim()}`;

const clubLatestMeta = new Map<string, LatestMeta>();
for (const r of clubRowsPublic) {
  const k = clubKeyOf(r);
  if (!k) continue;

  const meta: LatestMeta = {
    season: String(r.season ?? "").trim(),
    window: String(r.window ?? "")
      .trim()
      .toLowerCase(),
    snapshot_date: String(r.snapshot_date ?? "").trim(),
  };

  if (meta.window !== "summer" && meta.window !== "winter") meta.window = "";
  if (!meta.snapshot_date) continue;

  const prev = clubLatestMeta.get(k);
  if (!prev || isNewerMeta(meta, prev)) clubLatestMeta.set(k, meta);
}

const clubRowsPublicLatest = clubRowsPublic.filter((r: any) => {
  const k = clubKeyOf(r);
  const latest = clubLatestMeta.get(k);
  if (!latest) return false;

  const meta: LatestMeta = {
    season: String(r.season ?? "").trim(),
    window: String(r.window ?? "")
      .trim()
      .toLowerCase(),
    snapshot_date: String(r.snapshot_date ?? "").trim(),
  };
  if (meta.window !== "summer" && meta.window !== "winter") meta.window = "";

  return (
    meta.season === latest.season &&
    meta.window === latest.window &&
    meta.snapshot_date === latest.snapshot_date
  );
});

const clubsLeagueCount = new Set(
  clubRowsPublicLatest.map((r: any) =>
    normalizeLeagueKey(r.league_key ?? r.league),
  ),
).size;

const clubsClubCount = clubLatestMeta.size;
const clubsPlayerCount = clubRowsPublicLatest.length;

const clubSnapMax =
  clubLatestMeta.size > 0
    ? Array.from(clubLatestMeta.values())
        .map((m) => m.snapshot_date)
        .reduce((a, b) => (a > b ? a : b))
    : null;
const updatedAtClub = ymdToJa(clubSnapMax);

const leaguesInData = new Set(
  clubRowsPublicLatest.map((r: any) =>
    normalizeLeagueKey(r.league_key ?? r.league),
  ),
);

const leagueShortcutsVisible = leagueShortcuts.filter(
  (x) => publicLeagueKeys.has(x.league) && leaguesInData.has(x.league),
);

const wcTopHref = tournamentTopUrl({
  tournament: DEFAULTS.currentWcTournament,
  year: DEFAULTS.currentWcYear,
});

const leagueHref = (leagueKey: string) => clubsListUrl({ leagueKey });
const continentHref = (key: string) =>
  `${wcTopHref}?continent=${encodeURIComponent(key)}`;

const continentShortcuts = [
  { label: "æ¬§å·", key: "UEFA" },
  { label: "å—ç±³", key: "CONMEBOL" },
  { label: "åŒ—ä¸­ç±³", key: "CONCACAF" },
  { label: "ã‚¢ã‚¸ã‚¢", key: "AFC" },
  { label: "ã‚¢ãƒ•ãƒªã‚«", key: "CAF" },
  { label: "ã‚ªã‚»ã‚¢ãƒ‹ã‚¢", key: "OFC" },
];

const uclSeasons = getUclSeasons();
const uclSeason = uclSeasons?.[0] ? String(uclSeasons[0]).trim() : "2025-26";
const uclHref = competitionSeasonUrl("ucl", uclSeason);
const uclRows = loadUclLeaguePhaseBySeason(uclSeason);
const uclUpdatedAt = uclRows?.[0]?.updated_at
  ? String(uclRows[0].updated_at).replaceAll("-", "/")
  : "â€”";
const uclClubCount = uclRows?.length ?? 0;

const transfersAll = loadTransfers();
const transfersSnapMax = maxYmd(transfersAll, "date_iso");
const transfersUpdatedAt = ymdToJa(transfersSnapMax);

const japanHref = "/wc/2026/team/æ—¥æœ¬";
const japanNames = new Set(["æ—¥æœ¬", "æ—¥æœ¬ä»£è¡¨", "Japan"]);
const callupsJapan = callups.filter((r: any) =>
  japanNames.has(String(r.country ?? "").trim()),
);
const japanSnapMax = maxYmd(callupsJapan, "snapshot_date");
const japanUpdatedAt = ymdToJa(japanSnapMax);
---

<BaseLayout
  title="World Football Archiveï½œæµ·å¤–ã‚µãƒƒã‚«ãƒ¼DB"
  description="Wikiã‚ˆã‚Šã‚µãƒƒã¨è¦‹ã‚Œã¦ã€Transfermarktã‚ˆã‚Šè»½å¿«ã€‚ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’è¿½ã†ã‚ˆã‚Šã€å…¨ä½“ãŒä¸€ç›®ã§ã‚ã‹ã‚‹ã€‚ FIFAãƒ¯ãƒ¼ãƒ«ãƒ‰ã‚«ãƒƒãƒ—ã®ä»£è¡¨ãƒãƒ¼ãƒ ã‚„ã€æµ·å¤–ã‚¯ãƒ©ãƒ–ç™»éŒ²ãƒ¡ãƒ³ãƒãƒ¼ã® ã€ä»Š / ã‚ã®æ™‚ã€ ã‚’è¡Œãæ¥ã™ã‚‹ã€ã€ä¸–ç•Œã‚µãƒƒã‚«ãƒ¼DBã€ã€‚"
  bodyStyle="margin:0; background:#fafafa; color:#111;"
>
  <style>
    :root {
      --border: #e6e6e6;
      --muted: #666;
      --bg: #fafafa;
      --date-red: #e11d48;

      --nt-border: #7db7e6;
      --nt-bg: #f3f9ff;

      --club-border: #f2cf62;
      --club-bg: #fff9e6;

      --nt-pill-border: #6baed6;
      --nt-pill-hover-bg: #eef6fd;
      --nt-pill-dot: #2b6cb0;

      --club-pill-border: #f1c40f;
      --club-pill-hover-bg: #fff7cc;
      --club-pill-dot: #b58900;

      --jp-bg: #fff5f5;
    }

    /* âœ… ãƒ˜ãƒƒãƒ€ãƒ¼ä¸‹ã®ç©ºç™½ã‚’è©°ã‚ã‚‹ï¼ˆä¸Špaddingã‚’æ¸›ã‚‰ã™ï¼‰ */
    .container {
      max-width: var(--container-max);
      margin: 0 auto;
      padding: 12px var(--container-pad) 48px; /* 22 â†’ 12 */
    }

    /* âœ… heroã‚‚å°‘ã—è©°ã‚ã‚‹ */
    .hero {
      background: white;
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 14px 18px; /* 18 â†’ 14 */
    }

    .subtitle {
      margin: 0;
      color: var(--muted);
      line-height: 1.6;
    }

    /* ==========================
       âœ… 2åˆ—Ã—3è¡Œã‚°ãƒªãƒƒãƒ‰
       rowã”ã¨ã«å·¦å³ã®é«˜ã•ãŒæƒã†ï¼ˆç›®çš„â‘ ï¼‰
    ========================== */
    .grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin-top: 12px; /* 14 â†’ 12ï¼ˆå°‘ã—è©°ã‚ã‚‹ï¼‰ */
    }

    @media (min-width: 760px) {
      .grid {
        grid-template-columns: 1fr 1fr;
        grid-template-rows: auto auto auto;
        column-gap: 12px;
        row-gap: 12px;
        align-items: stretch;
      }

      .grid-nt-main {
        grid-column: 1;
        grid-row: 1;
      }
      .grid-club-main {
        grid-column: 2;
        grid-row: 1;
      }

      .grid-nt-sub1 {
        grid-column: 1;
        grid-row: 2;
      }
      .grid-club-sub1 {
        grid-column: 2;
        grid-row: 2;
      }

      .grid-nt-sub2 {
        grid-column: 1;
        grid-row: 3;
      }
      .grid-club-sub2 {
        grid-column: 2;
        grid-row: 3;
      }
    }

    .card {
      background: white;
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 16px;
      text-decoration: none;
      color: inherit;
      display: block;
      transition:
        transform 0.06s ease,
        box-shadow 0.06s ease;
      cursor: default;
    }
    .card:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
    }

    .card-nt {
      border: 2px solid var(--nt-border);
      background: var(--nt-bg);
    }
    .card-club {
      border: 2px solid var(--club-border);
      background: var(--club-bg);
    }

    .card-title {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 10px;
      margin: 0 0 6px;
    }
    .card-title h2 {
      font-size: 18px;
      margin: 0;
    }

    .badge {
      font-size: 12px;
      color: #222;
      border: 1px solid var(--border);
      padding: 3px 8px;
      border-radius: 999px;
      background: #fff;
      white-space: nowrap;
    }

    .card-desc {
      margin: 0;
      color: #555;
      line-height: 1.6;
    }

    .card-meta {
      margin-top: 10px;
      color: var(--muted);
      font-size: 12px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .date-red {
      color: var(--date-red);
      font-weight: 700;
    }

    .card-shortcuts {
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px dashed var(--border);
    }

    .quick-title {
      margin: 0;
      font-size: 13px;
      color: var(--muted);
    }

    .shortcut-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin: 0 0 10px;
      flex-wrap: wrap;
    }

    .see-now {
      font-size: 13px;
      color: #111;
      text-decoration: none;
      white-space: nowrap;
    }
    .see-now:hover {
      text-decoration: underline;
    }

    .pills {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #fff;
      color: #111;
      text-decoration: none;
      font-size: 13px;
      line-height: 1;
      transition:
        transform 0.06s ease,
        box-shadow 0.06s ease;
    }
    .pill:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
    }
    .pill .dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #111;
      opacity: 0.35;
    }

    .card-nt {
      --pill-border: var(--nt-pill-border);
      --pill-hover-bg: var(--nt-pill-hover-bg);
      --pill-dot: var(--nt-pill-dot);
    }
    .card-club {
      --pill-border: var(--club-pill-border);
      --pill-hover-bg: var(--club-pill-hover-bg);
      --pill-dot: var(--club-pill-dot);
    }

    .card-nt .pill,
    .card-club .pill {
      border-color: var(--pill-border);
      color: #333;
      background: #fff;
    }
    .card-nt .pill:hover,
    .card-club .pill:hover {
      background: var(--pill-hover-bg);
    }
    .card-nt .pill .dot,
    .card-club .pill .dot {
      background: var(--pill-dot);
      opacity: 0.65;
    }

    .card-nt .badge {
      background: #eef6fd;
      border: 1px solid #cfe3f7;
    }
    .card-club .badge {
      background: #fff7cc;
      border: 1px solid #f1e3a0;
    }

    .updates {
      margin-top: 10px; /* 12 â†’ 10 ã¡ã‚‡ã„è©°ã‚ */
      padding: 12px 14px;
      border: 1px solid var(--border);
      border-radius: 14px;
      background: #fff;
    }
    .updates h2 {
      margin: 0 0 6px;
      font-size: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .updates ul {
      margin: 0;
      padding-left: 16px;
    }
    .updates li {
      margin: 4px 0;
      line-height: 1.5;
      font-size: 12.5px;
    }
    .updates .date {
      display: inline-block;
      min-width: 86px;
      color: #e11d48;
      font-variant-numeric: tabular-nums;
      margin-right: 8px;
      font-size: 13px;
      font-weight: 700;
    }
    .updates .title {
      font-weight: 400;
      font-size: 14px;
    }

    /* âœ… ã‚µãƒ–BOXï¼ˆåŒæ ¼ã®ç®±ï¼‰ */
    .subcard {
      background: white;
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 16px;
    }
    .subcard-nt {
      border: 1px solid #cfe3f7;
      background: #f7fbff;
    }
    .subcard-club {
      border: 1px solid #f1e3a0;
      background: #fffdf3;
    }

    /* æ—¢å­˜boxã®ä½™è¨ˆãª margin-top ã‚’æ‰“ã¡æ¶ˆã— */
    .ucl-box,
    .transfer-box,
    .jp-box,
    .euro-box {
      margin-top: 0;
    }

    .ucl-box a,
    .transfer-box a,
    .jp-box a {
      color: #111;
      text-decoration: underline;
      text-underline-offset: 2px;
    }
    .ucl-box .ucl-sub,
    .transfer-box .transfer-sub,
    .jp-box .jp-sub {
      margin-top: 6px;
      font-size: 12px;
      color: var(--muted);
      line-height: 1.5;
    }

    .euro-title {
      font-size: 13px;
      font-weight: 600;
      color: #374151;
    }
    .euro-sub {
      margin-top: 4px;
      font-size: 12px;
      color: #6b7280;
    }

    .footer {
      margin-top: 18px;
      font-size: 12px;
      font-weight: 600;
      color: #111;
    }

    .pills-groups {
      gap: 6px;
    }
    .pill-group {
      padding: 6px 10px;
      font-size: 12.5px;
      border-style: dashed;
      background: transparent;
    }
    .card-nt .pill-group {
      border-color: var(--nt-pill-border);
      color: #2b6cb0;
    }
    .card-nt .pill-group:hover {
      background: var(--nt-pill-hover-bg);
    }
    .wc-card {
      background: linear-gradient(135deg, #0a3d62, #1e5799);
      color: white;
      border-radius: 14px;
      padding: 20px;
    }

    .wc-card h2 {
      margin: 0 0 12px;
      font-size: 1.3rem;
    }

    .wc-links {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .wc-btn {
      background: rgba(255, 255, 255, 0.15);
      padding: 8px 14px;
      border-radius: 999px;
      text-decoration: none;
      color: white;
      font-size: 0.9rem;
      transition: 0.2s;
    }

    .wc-btn:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    .wc-main {
      background: #ffd700;
      color: #222;
      font-weight: bold;
    }
  </style>

  <div class="container">
    <div class="hero">
      <p class="subtitle">
        Wikiã‚ˆã‚Šã‚µãƒƒã¨è¦‹ã‚Œã¦ã€Transfermarktã‚ˆã‚Šè»½å¿«ã€‚ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’è¿½ã†ã‚ˆã‚Šã€å…¨ä½“ãŒä¸€ç›®ã§ã‚ã‹ã‚‹ã€‚<br
        />
        FIFAãƒ¯ãƒ¼ãƒ«ãƒ‰ã‚«ãƒƒãƒ—ã®ä»£è¡¨ãƒãƒ¼ãƒ ã‚„ã€æµ·å¤–ã‚¯ãƒ©ãƒ–ç™»éŒ²ãƒ¡ãƒ³ãƒãƒ¼ã®ã€Œä»Š / ã‚ã®æ™‚ã€ã‚’è¡Œãæ¥ã™ã‚‹ã€ä¸–ç•Œã‚µãƒƒã‚«ãƒ¼DBã€‚
      </p>

      <section class="updates">
        <h2>ğŸ†• æ›´æ–°æƒ…å ±</h2>
        {
          updates.length === 0 ? (
            <p class="muted">æ›´æ–°æƒ…å ±ã¯æº–å‚™ä¸­ã§ã™ã€‚</p>
          ) : (
            <ul>
              {updates.map((u, i) => (
                <li class={i === 0 ? "is-latest" : ""}>
                  <span class="date">{u.date.replaceAll("-", "/")}</span>
                  <span class="title">{u.title}</span>
                </li>
              ))}
            </ul>
          )
        }
      </section>

      <div class="grid">
        <!-- ğŸ† WCãƒãƒ¼ã‚¿ãƒ«ã‚«ãƒ¼ãƒ‰ -->
        <div class="card wc-card">
          <h2>ğŸ† FIFAãƒ¯ãƒ¼ãƒ«ãƒ‰ã‚«ãƒƒãƒ—2026</h2>

          <div class="wc-links">
            <a href="/wc/2026/#groups" class="wc-btn">ã‚°ãƒ«ãƒ¼ãƒ—å‹æ•—è¡¨ï¼ˆã‚°ãƒ«ãƒ¼ãƒ—ã‚¹ãƒ†ãƒ¼ã‚¸ï¼‰</a>
            <a href="/wc/2026/#teams" class="wc-btn">å‡ºå ´å›½ãƒ»ä»£è¡¨ãƒ¡ãƒ³ãƒãƒ¼ä¸€è¦§</a>
            <a href="/wc/2026/#rankings" class="wc-btn"
              >å¾—ç‚¹ãƒ»ã‚¢ã‚·ã‚¹ãƒˆãƒ©ãƒ³ã‚­ãƒ³ã‚°</a
            >
            <a href="/wc/2026/#schedule" class="wc-btn">æ—¥ç¨‹ãƒ»è©¦åˆçµæœï¼ˆãƒãƒƒãƒã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰</a>
            <a href="/wc/2026/#awards" class="wc-btn wc-main">è¡¨å½°ï¼ˆå€‹äººè³ãƒ»ãƒ™ã‚¹ãƒˆã‚¤ãƒ¬ãƒ–ãƒ³ï¼‰</a>
          </div>
        </div>

        <!-- row1 col2: CLUB main -->
        <div class="card card-club grid-club-main">
          <div class="card-title">
            <h2>2025-26 ä¸»è¦ã‚¯ãƒ©ãƒ– ç™»éŒ²ãƒ¡ãƒ³ãƒãƒ¼(ã‚¹ã‚«ãƒƒãƒ‰)</h2>
            <span class="badge">ãƒªãƒ¼ã‚°åˆ¥ â†’ ã‚¯ãƒ©ãƒ–åˆ¥ãƒ¡ãƒ³ãƒãƒ¼</span>
          </div>

          <p class="card-desc">
            æœ€æ–°ã‚·ãƒ¼ã‚ºãƒ³ã®ç™»éŒ²é¸æ‰‹ã‚’ã€ã‚¯ãƒ©ãƒ–åˆ¥ãƒ»ãƒªãƒ¼ã‚°åˆ¥ã«ã€‚
          </p>

          <div class="card-meta">
            <span
              >ã‚¯ãƒ©ãƒ–æ›´æ–°ï¼š<span class="date-red">{updatedAtClub}</span></span
            >
            <span>
              ã‚¯ãƒ©ãƒ–ï¼š{clubsLeagueCount}ãƒªãƒ¼ã‚° / {clubsClubCount}ã‚¯ãƒ©ãƒ– / {
                clubsPlayerCount
              }äºº
            </span>
          </div>

          <div class="card-shortcuts">
            <div class="shortcut-head">
              <p class="quick-title">ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆï¼šä¸»è¦ãƒªãƒ¼ã‚°ã‹ã‚‰æ¢ã™</p>
              <a class="see-now" href="/clubs">â†’ ã„ã¾ã™ãè¦‹ã‚‹</a>
            </div>

            <div class="pills">
              {
                leagueShortcutsVisible.map((x) => (
                  <a
                    class="pill"
                    href={leagueHref(x.league)}
                    aria-label={`${x.label} ã®ã‚¯ãƒ©ãƒ–ä¸€è¦§ã¸`}
                  >
                    <span class="dot" aria-hidden="true" />
                    {x.label}
                  </a>
                ))
              }
              <a class="pill" href="/clubs" aria-label="å…¨ãƒªãƒ¼ã‚°ã®ã‚¯ãƒ©ãƒ–ä¸€è¦§ã¸">
                <span class="dot" aria-hidden="true"></span>
                å…¨ãƒªãƒ¼ã‚°
              </a>
            </div>
          </div>
        </div>

        <!-- row2 col1: Japan -->
        <div class="subcard subcard-nt jp-box grid-nt-sub1">
          <div style="font-size:13px; font-weight:600;">
            <a href={japanHref}>SAMURAI BLUEï¼ˆæ—¥æœ¬ä»£è¡¨/ãƒ¯ãƒ¼ãƒ«ãƒ‰ã‚«ãƒƒãƒ—ï¼‰</a>
          </div>
          <div class="jp-sub">
            æ—¥æœ¬ä»£è¡¨ã¯ã‚³ãƒãƒ©ã‹ã‚‰ï¼ˆWC2026ãƒ¡ãƒ³ãƒãƒ¼ä¸€è¦§ã¸ï¼‰<br />
            æ›´æ–°ï¼š<span class="date-red">{japanUpdatedAt}</span>
          </div>
        </div>

        <!-- row2 col2: UCL -->
        <div class="subcard subcard-club ucl-box grid-club-sub1">
          <div style="font-size:13px; font-weight:600;">
            <a href={uclHref}>UEFAãƒãƒ£ãƒ³ãƒ”ã‚ªãƒ³ã‚ºãƒªãƒ¼ã‚°(CL) {uclSeason}ï¼ˆé †ä½è¡¨ï¼‰</a>
          </div>
          <div class="ucl-sub">
            ãƒªãƒ¼ã‚°ãƒ•ã‚§ãƒ¼ã‚ºæœ€çµ‚é †ä½è¡¨ï¼ˆã‚¯ãƒ©ãƒ–è©³ç´°ã¸é·ç§»ã§ãã¾ã™ï¼‰<br />
            æ›´æ–°ï¼š<span class="date-red">{uclUpdatedAt}</span>ã€€å‚åŠ ï¼š{
              uclClubCount
            }ã‚¯ãƒ©ãƒ–
          </div>
        </div>

        <!-- row3 col1: EURO -->
        <div class="subcard subcard-nt euro-box grid-nt-sub2">
          <div class="euro-title">EURO 2028 äºˆé¸</div>
          <div class="euro-sub">æº–å‚™ä¸­</div>
          <div class="euro-sub">
            æ›´æ–°ï¼š<span class="date-red">â€”</span>
          </div>
        </div>

        <!-- row3 col2: Transfers -->
        <div class="subcard subcard-club transfer-box grid-club-sub2">
          <div style="font-size:13px; font-weight:600;">
            <a href="/transfers">2025-26å†¬ ä¸»ãªç§»ç±ä¸€è¦§</a>
          </div>
          <div class="transfer-sub">
            å†¬ã®ä¸»è¦é¸æ‰‹ã®ç§»ç±ã¯ã‚³ãƒãƒ©ã‹ã‚‰ä¸€è¦§ã§ï¼<br />
            æ›´æ–°ï¼š<span class="date-red">{transfersUpdatedAt}</span>
          </div>
        </div>
      </div>

      <div class="footer">
        â€» å„æ›´æ–°æ—¥ã¯ã€ä»£è¡¨ãƒ»ã‚¯ãƒ©ãƒ–ãã‚Œãã‚Œã®æœ€æ–°ãƒ‡ãƒ¼ã‚¿åæ˜ æ—¥ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚
      </div>

      <div
        style="margin-top:28px; text-align:center; font-size:13px; color:#666;"
      >
        <a href="/about">World Football Archive ã«ã¤ã„ã¦ï¼ˆã“ã®ã‚µã‚¤ãƒˆã®æ¦‚è¦ï¼‰</a>
      </div>
    </div>
  </div>
</BaseLayout>
